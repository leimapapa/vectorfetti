function confetti(j,o){if(!j){console.error("Must have element to populate the confetti!");return}let p={colors:"random",delay:100,drop:window.innerHeight,fadeout:!0,flakes:100,speed:6e3,spread:400,type:"default"},b=Object.assign(p,o),a=(a,b)=>Math.floor(Math.random()*(b-a+1))+a,d=b.drop,c=b.spread,k="";(!b.flakes||Number.isNaN(1*b.flakes))&&(b.flakes=100);for(let l=0;l<b.flakes;l++){let e=`con${a(0,1e3)}fet${a(0,1e3)}ti${a(0,1e3)}`,q=`${a(b.speed/2,b.speed)}`,g="",f=`<animateTransform attributeName="transform" attributeType="XML" type="rotate" from="0 0 0" to="${(.5>Math.random()?-1:1)*360} 0 0" dur="${a(b.speed/6,b.speed/2)}ms" begin="-${a(1,10)/10}s" repeatCount="indefinite"/>`,h="";switch(h="random"!=b.colors&&Array.isArray(b.colors)?b.colors[a(0,b.colors.length-1)]:`rgb(${a(0,255)}, ${a(0,255)}, ${a(0,255)})`,b.type){case"XO":case"xo":g=1==a(0,1)?`<circle id="${e}" stroke="${h}" stroke-width="${a(1,3)}" fill="none" cx="0" cy="0" r="${a(4,7)}" filter="url(#blur${a(1,2)})">
		${f}
		</circle>`:`<path id="${e}" fill="${h}" d="M -5 1 H -1 V 5 A 1 1 0 0 0 1 5 V 1 H 5 A 1 1 0 0 0 5 -1 H 1 V -5 A 1 1 0 0 0 -1 -5 V -1 H -5 A 1 1 0 0 0 -5 1"  filter="url(#blur${a(1,2)})">
		${f}
		</path>`;break;case"code":g=1==a(0,1)?`<text id="${e}" fill="${h}" stroke-width="${a(1,3)}" fill="none" cx="0" cy="0" r="${a(4,7)}" filter="url(#blur${a(1,2)})">1
		${f}
		</text>`:`<text id="${e}" fill="${h}" stroke-width="${a(1,3)}" fill="none" cx="0" cy="0" r="${a(4,7)}" filter="url(#blur${a(1,2)})">0
		${f}
		</text>`;break;case"circle":g=`<circle id="${e}" fill="${h}" cx="0" cy="0" r="${a(4,7)}" filter="url(#blur${a(1,2)})">
		${f}
		</circle>`;break;case"flower":g=`<g filter="url(#blur${a(1,2)})" id="${e}">
				<path fill="${h}" d="M -2 -2 C -4 -10 4 -10 2 -2 L 2 2 C 4 10 -4 10 -2 2 L -2 -2 M 0 -2.828 C 4.242 -9.9 9.9 -4.242 2.828 0 L 0 2.828 C -4.242 9.9 -9.9 4.242 -2.828 0 L 0 -2.828 M -2.828 0 C -9.9 -4.242 -4.242 -9.9 0 -2.828 L 2.828 0 C 9.9 4.242 4.242 9.9 0 2.828 L -2.828 0 M 2 -2 C 10 -4 10 4 2 2 L -2 2 C -10 4 -10 -4 -2 -2 L 2 -2" filter="drop-shadow(rgba(0, 0, 0, ${a(0,10)/10}) 0px 0px ${a(0,10)/10}px)" />
			<path fill="rgb(${a(0,255)}, ${a(0,255)}, ${a(0,255)})" d="M 0 -2 C -4 -10 4 -10 0 -2 L 0 2 C 4 10 -4 10 0 2 L 0 0 M 2 -2 C 4.242 -9.9 9.9 -4.242 2 -2 L -2 2 C -4.242 9.9 -9.9 4.242 -2 2 M -2 -2 C -9.9 -4.242 -4.242 -9.9 -2 -2 L 2 2 C 9.9 4.242 4.242 9.9 2 2 L 0 0 M 2 0 C 10 -4 10 4 2 0 L -2 0 C -10 4 -10 -4 -2 0 L 2 0" />
			<circle fill="rgb(${a(0,255)}, ${a(0,255)}, ${a(0,255)})" cx="0" cy="0" r="2.8" stroke="rgb(${a(0,255)}, ${a(0,255)}, ${a(0,255)})" stroke-width="0.4" />
			${f}
			</g>`;break;case"square":let m=a(4,12);g=`<rect id="${e}" fill="rgb(${a(0,255)}, ${a(0,255)}, ${a(0,255)})" x="0" y="0" height="${m}" width="${m}" filter="url(#blur${a(1,2)})">
					${f}
				</rect>`;break;default:g=`<rect id="${e}" fill="rgb(${a(0,255)}, ${a(0,255)}, ${a(0,255)})" x="0" y="0" height="${a(6,18)}" width="${a(4,7)}" filter="url(#blur${a(1,2)})">
					${f}
				</rect>`}k+=`<g transform="translate(${a(-0.3*c,.3*c)} 0) scale(1.${a(0,1)})">
		${g}		
	</g>
	<animateMotion xlink:href="#${e}" dur="${q}ms" begin="0s" fill="freeze" repeatCount="none">
		<mpath xlink:href="#motionPath${a(1,2)}" />
	</animateMotion>`}let i=j.getBoundingClientRect(),r=i.top+(i.bottom-i.top)/2,s=i.left-(i.left-i.right)/2,t=`conf${a(0,1e3)}etti${a(0,1e3)}ver${a(0,1e3)}lay`,u=`<svg id="${t}" viewbox="0 0 ${c} ${d}" height="1" width="1" preserveAspectRatio="none" style="
	left:${s}px; 
	pointer-events:none; 
	position:fixed; 
	top:${r}px; 
	transform:translate(-50%,-50%); 
	transition:${b.speed/10}ms; 
	user-select:none; 
	z-index:99999">
	<filter id="blur1" x="-100%" y="-100%" width="300%" height="300%">
		<feGaussianBlur in="SourceGraphic" stdDeviation="0" />
	</filter>
	<filter id="blur2" x="-100%" y="-100%" width="300%" height="300%">
		<feGaussianBlur in="SourceGraphic" stdDeviation="1" />
	</filter>
	<path id="motionPath1" fill="none" stroke="none" d="M ${.5*c} -${0*d} Q ${.3*c} ${.25*d} ${.5*c} ${.5*d} Q ${.7*c} ${.75*d} ${.5*c} ${1.1*d}" />
	<path id="motionPath2" fill="none" stroke="none" d="M ${.5*c} -${0*d} Q ${.7*c} ${.25*d} ${.5*c} ${.5*d} Q ${.3*c} ${.75*d} ${.5*c} ${1.1*d}" />
	${k}
</svg>`,n=document.createElement("div");n.innerHTML=u;let v=n.firstChild;document.body.appendChild(v),setTimeout(()=>{v.style.height=`${d}px`,v.style.width=`${c}px`},b.delay),b.fadeout&&setTimeout(()=>{let a=document.getElementById(t);a&&(a.style.opacity=0,a.style.transition=`${b.speed/4}ms`)},b.speed/4),setTimeout(()=>{let a=document.getElementById(t);a?.remove()},b.speed)}
